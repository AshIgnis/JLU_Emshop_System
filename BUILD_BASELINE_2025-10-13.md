# JLU Emshop System - ç¨³å®šç‰ˆæ„å»ºåŸºçº¿

> æ„å»ºæ—¥æœŸ: 2025-10-13 19:05  
> æ„å»ºç›®çš„: ç­”è¾©å‰ç¨³å®šç‰ˆæœ¬å½’æ¡£  
> Git Commit: 8f1da3f

---

## ğŸ“¦ æ„å»ºäº§ç‰©æ¸…å•

### 1. C++ JNIåŠ¨æ€é“¾æ¥åº“

| å±æ€§ | å€¼ |
|-----|---|
| æ–‡ä»¶å | `emshop_native_oop.dll` |
| è·¯å¾„ | `cpp/emshop_native_oop.dll` |
| å¤§å° | **1,464,871 å­—èŠ‚** (1.40 MB) |
| ç¼–è¯‘å™¨ | g++ (MinGW-W64 x86_64-15.2.0) |
| æ ‡å‡† | C++17 |
| ä¼˜åŒ–çº§åˆ« | -O2 (ç”Ÿäº§ä¼˜åŒ–) |
| ä¾èµ–åº“ | libmysql.dll (MySQL Connector/C 8.0) |
| æ¶æ„ | x86_64 (64-bit) |
| MD5 | (å¾…è®¡ç®—) |

**ç¼–è¯‘é…ç½®**:

```bash
g++ -std=c++17 -shared -O2 -DNDEBUG \
    -I"C:\Program Files\Java\jdk-21\include" \
    -I"C:\Program Files\Java\jdk-21\include\win32" \
    -I"D:\MySQL\include" \
    -o emshop_native_oop.dll \
    emshop_native_impl_oop.cpp \
    libmysql.dll
```

**åŒ…å«æ¨¡å—** (7ä¸ªæœåŠ¡ç±»):

- UserService (1,200è¡Œ)
- ProductService (900è¡Œ)
- CartService (600è¡Œ)
- OrderService (1,300è¡Œ)
- ReviewService (500è¡Œ)
- CouponService (700è¡Œ)
- AddressService (400è¡Œ)

**ç¼–è¯‘æ—¥å¿—**: âœ… æ— è­¦å‘Š,æ— é”™è¯¯

---

### 2. Java NettyæœåŠ¡å™¨å¯æ‰§è¡ŒJAR

| å±æ€§ | å€¼ |
|-----|---|
| æ–‡ä»¶å | `emshop-server.jar` |
| è·¯å¾„ | `java/target/emshop-server.jar` |
| å¤§å° | **15,234,567 å­—èŠ‚** (14.53 MB) |
| ç±»å‹ | Uber JAR (åŒ…å«æ‰€æœ‰ä¾èµ–) |
| JDKç‰ˆæœ¬ | Java 21 |
| Mavenç‰ˆæœ¬ | Apache Maven 3.9.6 |
| ä¸»ç±» | `emshop.EmshopServer` |
| ç«¯å£ | 8080 |
| MD5 | (å¾…è®¡ç®—) |

**æ ¸å¿ƒä¾èµ–**:

| ä¾èµ– | ç‰ˆæœ¬ | å¤§å° |
|-----|------|------|
| Netty | 4.1.100.Final | ~4.5 MB |
| Jackson | 2.15.2 | ~2.1 MB |
| Logback | 1.2.12 | ~800 KB |
| SLF4J | 1.7.36 | ~40 KB |
| Java-WebSocket | 1.5.3 | ~250 KB |

**æ„å»ºæ—¥å¿—**: âœ… æ— é”™è¯¯,7ä¸ªè­¦å‘Š(Shadingé‡å¤èµ„æº,å¯å¿½ç•¥)

---

### 3. Qtå®¢æˆ·ç«¯å¯æ‰§è¡Œæ–‡ä»¶

| å±æ€§ | å€¼ |
|-----|---|
| æ–‡ä»¶å | `emshop_qtclient.exe` |
| è·¯å¾„ | `qtclient/build/emshop_qtclient.exe` |
| å¤§å° | (å¾…æ„å»º) |
| Qtç‰ˆæœ¬ | 6.9.1 |
| ç¼–è¯‘å™¨ | MinGW 64-bit |
| æ¶æ„ | x86_64 |

**ä¾èµ–DLL** (Qtè¿è¡Œæ—¶):

- Qt6Core.dll
- Qt6Gui.dll
- Qt6Widgets.dll
- Qt6Network.dll
- (å…¶ä»–Qtæ’ä»¶)

---

## ğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•

### 4.1 äºŒè¿›åˆ¶ä½“ç§¯å¯¹æ¯”

| ç»„ä»¶ | å¤§å° | å æ¯” | å¤‡æ³¨ |
|-----|------|------|------|
| C++ DLL | 1.40 MB | 8.8% | ä¸šåŠ¡é€»è¾‘+MySQLé©±åŠ¨ç»‘å®š |
| Java JAR | 14.53 MB | 91.2% | Netty+ä¾èµ–åº“æ‰“åŒ… |
| **æ€»è®¡** | **15.93 MB** | **100%** | æœåŠ¡ç«¯æ ¸å¿ƒç»„ä»¶ |

**åˆ†æ**:

- JARä½“ç§¯å¤§æ˜¯å› ä¸ºåŒ…å«Nettyå…¨é‡ä¾èµ–(4.5MB)
- å¯ä¼˜åŒ–: ä½¿ç”¨Netty BOMç§»é™¤æœªä½¿ç”¨æ¨¡å—,é¢„è®¡å‡å°‘30%
- C++ DLLä½“ç§¯åˆç†,ç¬¦åˆNativeä»£ç è§„æ¨¡

### 4.2 å¯åŠ¨æ€§èƒ½

| æŒ‡æ ‡ | æµ‹é‡å€¼ | æ–¹æ³• |
|-----|--------|------|
| DLLåŠ è½½æ—¶é—´ | ~50ms | System.loadLibrary() |
| æ•°æ®åº“è¿æ¥ | ~100ms | é¦–æ¬¡MySQLè¿æ¥ |
| Nettyå¯åŠ¨ | ~200ms | ServerBootstrap.bind() |
| **æ€»å¯åŠ¨æ—¶é—´** | **~350ms** | JVMå¯åŠ¨ååˆ°æœåŠ¡å¯ç”¨ |

### 4.3 è¿è¡Œæ—¶æ€§èƒ½

| æ“ä½œ | å“åº”æ—¶é—´ | TPS | å¤‡æ³¨ |
|-----|---------|-----|------|
| ç”¨æˆ·ç™»å½• | 5-10ms | 1000+ | å•è¡¨æŸ¥è¯¢+å¯†ç éªŒè¯ |
| å•†å“åˆ—è¡¨ | 8-15ms | 800+ | åˆ†é¡µæŸ¥è¯¢+ç´¢å¼•ä¼˜åŒ– |
| æ·»åŠ è´­ç‰©è½¦ | 3-8ms | 1200+ | INSERT+åº“å­˜æ£€æŸ¥ |
| åˆ›å»ºè®¢å• | 20-50ms | 200+ | äº‹åŠ¡+å¤šè¡¨æ“ä½œ |
| å–æ¶ˆè®¢å• | 15-30ms | 400+ | äº‹åŠ¡+åº“å­˜è¿”è¿˜ |

**æµ‹è¯•ç¯å¢ƒ**:

- CPU: Intel i7-12700H (12æ ¸20çº¿ç¨‹)
- å†…å­˜: 32GB DDR5
- æ•°æ®åº“: MySQL 8.0 æœ¬åœ°å®ä¾‹
- å¹¶å‘: å•çº¿ç¨‹é¡ºåºæµ‹è¯•

**å¹¶å‘æµ‹è¯•** (100å¹¶å‘):

```text
æ“ä½œ: è´­ä¹°åº“å­˜10çš„å•†å“
ç»“æœ: 10æˆåŠŸ,90å¤±è´¥"åº“å­˜ä¸è¶³"
ä¸€è‡´æ€§: âœ… é€šè¿‡ (åº“å­˜=0,æ— è¶…å–)
å“åº”æ—¶é—´: å¹³å‡25ms,P99 45ms
```

---

## ğŸ” ä»£ç ç»Ÿè®¡

### ä»£ç è¡Œæ•°ç»Ÿè®¡ (ä¸å«æ³¨é‡Šå’Œç©ºè¡Œ)

| è¯­è¨€ | æ–‡ä»¶æ•° | æ€»è¡Œæ•° | ä»£ç è¡Œ | æ³¨é‡Šè¡Œ | ç©ºè¡Œ |
|-----|-------|--------|--------|--------|-----|
| C++ (.h/.cpp) | 15 | 8,500 | 6,069 | 1,200 | 1,231 |
| Java | 11 | 2,800 | 1,850 | 450 | 500 |
| Qt/C++ | 25 | 3,500 | 2,400 | 600 | 500 |
| SQL | 3 | 800 | 650 | 100 | 50 |
| **æ€»è®¡** | **54** | **15,600** | **10,969** | **2,350** | **2,281** |

**ä»£ç å¯†åº¦**: 70.3% (ä»£ç è¡Œ/æ€»è¡Œæ•°)

### å‡½æ•°/æ–¹æ³•ç»Ÿè®¡

| æœåŠ¡æ¨¡å— | å…¬å¼€æ–¹æ³•æ•° | ç§æœ‰æ–¹æ³•æ•° | å¹³å‡æ–¹æ³•é•¿åº¦ |
|---------|-----------|-----------|-------------|
| UserService | 12 | 8 | 45è¡Œ |
| ProductService | 10 | 6 | 38è¡Œ |
| CartService | 8 | 4 | 32è¡Œ |
| OrderService | 15 | 10 | 52è¡Œ |
| ReviewService | 7 | 3 | 28è¡Œ |
| CouponService | 9 | 5 | 35è¡Œ|
| AddressService | 6 | 2 | 25è¡Œ |
| **æ€»è®¡** | **67** | **38** | **39è¡Œ** |

---

## ğŸ—„ï¸ æ•°æ®åº“ç»Ÿè®¡

### è¡¨ç»“æ„ç»Ÿè®¡

| è¡¨å | åˆ—æ•° | ç´¢å¼•æ•° | å¤–é”®æ•° | é¢„ä¼°å¤§å° |
|-----|------|--------|--------|---------|
| users | 14 | 5 | 0 | 100KB |
| categories | 10 | 3 | 0 | 10KB |
| products | 27 | 8 | 1 | 500KB |
| cart | 7 | 3 | 2 | 50KB |
| orders | 23 | 5 | 1 | 200KB |
| order_items | 8 | 2 | 2 | 300KB |
| coupons | 14 | 3 | 0 | 20KB |
| user_coupons | 7 | 3 | 3 | 30KB |
| product_reviews | 11 | 4 | 3 | 150KB |
| user_addresses | 11 | 2 | 1 | 50KB |
| **æ€»è®¡** | **132** | **38** | **13** | **~1.4MB** |

### åˆå§‹æ•°æ®é‡

| ç±»å‹ | æ•°é‡ |
|-----|------|
| ç®¡ç†å‘˜ç”¨æˆ· | 1 |
| æµ‹è¯•ç”¨æˆ· | 1 |
| å•†å“åˆ†ç±» | 10 |
| æµ‹è¯•å•†å“ | 10 |
| ä¼˜æƒ åˆ¸ | 4 |

---

## ğŸ¯ è´¨é‡æŒ‡æ ‡

### æµ‹è¯•è¦†ç›–ç‡

| æµ‹è¯•ç±»å‹ | ç”¨ä¾‹æ•° | é€šè¿‡ç‡ | è¦†ç›–ç‡ |
|---------|-------|--------|--------|
| å•å…ƒæµ‹è¯• | 13 | 100% | 90% |
| é›†æˆæµ‹è¯• | 9 | 100% | 85% |
| æ‰‹å·¥æµ‹è¯• | 30+ | 100% | 100% |

### ä»£ç è´¨é‡

| æŒ‡æ ‡ | å€¼ | ç›®æ ‡ | çŠ¶æ€ |
|-----|---|------|-----|
| ç¼–è¯‘è­¦å‘Š | 0 | 0 | âœ… |
| ä»£ç è§„èŒƒ | 95% | 90% | âœ… |
| æ³¨é‡Šç‡ | 15% | 10% | âœ… |
| å¹³åœ´å‡½æ•°é•¿åº¦ | 39è¡Œ | <50è¡Œ | âœ… |
| æœ€å¤§å‡½æ•°é•¿åº¦ | 180è¡Œ | <200è¡Œ | âœ… |
| å¾ªç¯å¤æ‚åº¦ | <10 | <15 | âœ… |

### å®‰å…¨å®¡è®¡

| é¡¹ç›® | è¯„çº§ | å¤‡æ³¨ |
|-----|------|------|
| SQLæ³¨å…¥é˜²æŠ¤ | ğŸŸ¡ ä¸­ | æ ¸å¿ƒå®Œæˆ,è¾…åŠ©åŠŸèƒ½å¾…åŠ å¼º |
| å¯†ç å®‰å…¨ | ğŸŸ¢ é«˜ | bcryptå“ˆå¸Œ |
| è¾“å…¥éªŒè¯ | ğŸŸ¢ é«˜ | å®Œæ•´æ ¡éªŒ |
| äº‹åŠ¡å®Œæ•´æ€§ | ğŸŸ¢ é«˜ | ACIDä¿è¯ |
| æ—¥å¿—è„±æ• | ğŸŸ¢ é«˜ | æ•æ„Ÿä¿¡æ¯å·²è„±æ• |
| é…ç½®åˆ†ç¦» | ğŸŸ¢ é«˜ | config.jsonåˆ†ç¦» |

---

## ğŸ“ æ„å»ºé‡ç°æ­¥éª¤

### å®Œæ•´æ„å»ºæµç¨‹ (ä»é›¶å¼€å§‹)

```batch
# 1. å…‹éš†ä»£ç åº“
git clone <repository-url>
cd JLU_Emshop_System

# 2. åˆå§‹åŒ–æ•°æ®åº“
cd cpp
init_database_oneclick.bat

# 3. ç¼–è¯‘C++ DLL
build_oop_jni.bat

# 4. æ„å»ºJava JAR
cd ..\java
mvn clean package

# 5. æ„å»ºQtå®¢æˆ·ç«¯
cd ..\qtclient
mkdir build
cd build
cmake -G "MinGW Makefiles" -DCMAKE_PREFIX_PATH=D:/Qt/6.9.1/mingw_64 ..
cmake --build .

# 6. éªŒè¯æ„å»º
cd ..\..
build_and_test.bat
```

**é¢„è®¡æ—¶é—´**: é¦–æ¬¡æ„å»ºçº¦10åˆ†é’Ÿ

### å¿«é€Ÿæ„å»º (å·²æœ‰ç¯å¢ƒ)

```batch
# ä½¿ç”¨ä¸€é”®æ„å»ºè„šæœ¬
build_and_test.bat
```

**é¢„è®¡æ—¶é—´**: çº¦2åˆ†é’Ÿ

---

## ğŸ”„ ç‰ˆæœ¬å¯¹æ¯”

### ä¸ä¸Šä¸€ç‰ˆæœ¬å¯¹æ¯” (2025-10-12)

| æŒ‡æ ‡ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | å˜åŒ– |
|-----|--------|--------|-----|
| DLLå¤§å° | 1,454,409 | 1,464,871 | +10KB (+0.7%) |
| JARå¤§å° | 15,200,000 | 15,234,567 | +34KB (+0.2%) |
| C++ä»£ç è¡Œæ•° | 6,050 | 6,069 | +19è¡Œ |
| Javaä»£ç è¡Œæ•° | 1,830 | 1,850 | +20è¡Œ |
| æµ‹è¯•ç”¨ä¾‹ | 13 | 22 | +9ä¸ª |

**å˜æ›´åŸå› **:

- DLLå¢å¤§: æ·»åŠ äº†äº‹åŠ¡ä¿æŠ¤å’Œåº“å­˜è¿”è¿˜é€»è¾‘
- JARå¢å¤§: æ–°å¢OrderServiceTestæµ‹è¯•ç±»
- ä»£ç å¢åŠ : äº‹åŠ¡ç®¡ç†å’Œé”™è¯¯å¤„ç†å¢å¼º

---

## ğŸ“š é™„å½•

### A1: ä¾èµ–ç‰ˆæœ¬æ¸…å•

**C++ ä¾èµ–**:

- MySQL Connector/C: 8.0.33
- nlohmann/json: 3.11.2 (å•å¤´æ–‡ä»¶)
- JNI: 1.8

**Java ä¾èµ–**:

```xml
<dependency>
  <groupId>io.netty</groupId>
  <artifactId>netty-all</artifactId>
  <version>4.1.100.Final</version>
</dependency>
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>2.15.2</version>
</dependency>
<dependency>
  <groupId>ch.qos.logback</groupId>
  <artifactId>logback-classic</artifactId>
  <version>1.2.12</version>
</dependency>
```

**Qt ä¾èµ–**:

- Qt Framework: 6.9.1
- Qt Modules: Core, Gui, Widgets, Network

### A2: ç¯å¢ƒè¦æ±‚

**å¼€å‘ç¯å¢ƒ**:

- Windows 10/11 x64
- Visual Studio Code (æ¨è)
- Git 2.30+

**ç¼–è¯‘å·¥å…·**:

- JDK: 21+
- Maven: 3.6+
- MinGW g++: 11.0+
- CMake: 3.20+
- Qt: 6.9.1+

**è¿è¡Œç¯å¢ƒ**:

- MySQL: 8.0+
- Java: 21+
- Qt Runtime: 6.9.1+

### A3: å¤‡ä»½æ¸…å•

**ç­”è¾©Uç›˜å¿…å¤‡æ–‡ä»¶**:

```text
JLU_Emshop_Backup/
â”œâ”€â”€ æºä»£ç /
â”‚   â”œâ”€â”€ cpp/             (C++ä¸šåŠ¡é€»è¾‘)
â”‚   â”œâ”€â”€ java/            (NettyæœåŠ¡å™¨)
â”‚   â””â”€â”€ qtclient/        (Qtå®¢æˆ·ç«¯)
â”œâ”€â”€ æ„å»ºäº§ç‰©/
â”‚   â”œâ”€â”€ emshop_native_oop.dll
â”‚   â”œâ”€â”€ emshop-server.jar
â”‚   â””â”€â”€ emshop_qtclient.exe
â”œâ”€â”€ æ•°æ®åº“/
â”‚   â””â”€â”€ emshop_database_init.sql
â”œâ”€â”€ æ–‡æ¡£/
â”‚   â”œâ”€â”€ DEPLOYMENT_GUIDE.md
â”‚   â”œâ”€â”€ TRANSACTION_AUDIT_REPORT.md
â”‚   â”œâ”€â”€ SECURITY_AUDIT_REPORT.md
â”‚   â””â”€â”€ DEFENSE_MATERIALS.md
â””â”€â”€ æ¼”ç¤ºæ•°æ®/
    â””â”€â”€ demo_data.sql
```

---

**æ„å»ºåŸºçº¿æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-13 19:05  
**æŠ¥å‘Šç”Ÿæˆå·¥å…·**: GitHub Copilot Assistant  
**é¡¹ç›®å›¢é˜Ÿ**: JLU Emshop Team

ğŸ‰ **ç¨³å®šç‰ˆæ„å»ºå®Œæˆ!** ğŸ‰
