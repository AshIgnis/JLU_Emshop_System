{
    "$schema": "vscode://schemas/tasks",
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Configure Qt Client",
            "type": "shell",
            "command": "cmake",
            "args": [
                "-S", "${workspaceFolder}/qtclient",
                "-B", "${workspaceFolder}/qtclient/build",
                "-G", "MinGW Makefiles",
                "-DCMAKE_PREFIX_PATH=D:/Qt/6.9.1/mingw_64"
            ],
            "options": {
                "env": {
                    "PATH": "D:/Qt/6.9.1/mingw_64/bin;${env:PATH}"
                }
            }
        },
        {
            "label": "Build Qt Client",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build", "${workspaceFolder}/qtclient/build",
                "--", "-j"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "dependsOn": ["Configure Qt Client"],
            "options": {
                "env": {
                    "PATH": "D:/Qt/6.9.1/mingw_64/bin;${env:PATH}"
                }
            }
        },
        {
            "label": "Run Qt Client",
            "type": "shell",
            "command": "${workspaceFolder}/qtclient/build/emshop_qtclient.exe",
            "dependsOn": ["Build Qt Client"],
            "options": {
                "cwd": "${workspaceFolder}/qtclient/build",
                "env": {
                    "PATH": "D:/Qt/6.9.1/mingw_64/bin;${env:PATH}"
                }
            }
        },
        {
            "label": "Clean Qt Client",
            "type": "shell",
            "command": "powershell",
            "args": [
                "-NoProfile",
                "-Command",
                "Remove-Item -Recurse -Force '${workspaceFolder}/qtclient/build/*' -ErrorAction SilentlyContinue"
            ]
        },
        {
            "label": "clr",
            "type": "shell",
            "command": "cls",
            "problemMatcher": []
        },
        {
            "dependsOn": "clr",
            "label": "build C++",
            "type": "shell",
            "command": "D:\\mingw\\x86_64-15.2.0-release-win32-seh-ucrt-rt_v13-rev0\\mingw64\\bin\\g++.exe",
            "args": [
                "${file}",
                "-o",
                "${fileDirname}/bin/${fileBasenameNoExtension}.exe",
                "-g",
                "-Wall",
                "-static-libgcc",
                "-fexec-charset=UTF-8",
                "-std=c++11",
                "-I","D:\\MySQL\\include",
                "-L","D:\\MySQL\\lib",
                "-I","C:\\Program Files\\Java\\jdk-21\\include",
                "-I","C:\\Program Files\\Java\\jdk-21\\include\\win32",
                "-DWIN32_LEAN_AND_MEAN",
                "-DNOMINMAX"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "problemMatcher": "$gcc"
        },
        {
            "label": "compile JNI object",
            "type": "shell",
            "command": "D:\\mingw\\x86_64-15.2.0-release-win32-seh-ucrt-rt_v13-rev0\\mingw64\\bin\\g++.exe",
            "args": [
                "-c",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}.o",
                "-I","C:\\Program Files\\Java\\jdk-21\\include",
                "-I","C:\\Program Files\\Java\\jdk-21\\include\\win32",
                "-I","D:\\MySQL\\include",
                "-std=c++11",
                "-Wall",
                "-fPIC",
                "-DWIN32_LEAN_AND_MEAN",
                "-DNOMINMAX"
            ],
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "problemMatcher": "$gcc"
        },
        {
            "label": "build JNI DLL",
            "dependsOn": "compile JNI object",
            "type": "shell",
            "command": "D:\\mingw\\x86_64-15.2.0-release-win32-seh-ucrt-rt_v13-rev0\\mingw64\\bin\\g++.exe",
            "args": [
                "-shared",
                "-o",
                "${fileDirname}/bin/${fileBasenameNoExtension}.dll",
                "${fileDirname}/${fileBasenameNoExtension}.o",
                "-L","D:\\MySQL\\lib",
                "-lmysql",
                "-Wl,--out-implib,${fileDirname}/bin/${fileBasenameNoExtension}.lib"
            ],
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "new"
            },
            "problemMatcher": "$gcc"
        },
        {
            "label": "run C++",
            "dependsOn": "build C++",
            "type": "shell",
            "command": "${fileDirname}/bin/${fileBasenameNoExtension}.exe",
            "group": {
                "kind": "test",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": true,
                "panel": "new"
            },
            "problemMatcher": []
        },
        {
            "label": "run Java",
            "dependsOn": "build Java",
            "type": "shell",
            "command": "java",
            "args": [
                "${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "group": {
                "kind": "test",
                "isDefault": false
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": true,
                "panel": "shared"
            },
            "problemMatcher": []
        },
        {
            "label": "build Java",
            "type": "shell",
            "command": "javac",
            "args": [
                "${file}"
            ],
            "group": {
                "kind": "test",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": {
                "owner": "java",
                "fileLocation": [
                    "relative",
                    "${fileDirname}"
                ],
                "pattern": [
                    {
                        "regexp": "^(.*)$",
                        "message": 1
                    },
                    {
                        "regexp": "^\\s*at .+\\((.+):([0-9]+)\\)$",
                        "file": 1,
                        "line": 2
                    }
                ]
            }
        }
    ]
}